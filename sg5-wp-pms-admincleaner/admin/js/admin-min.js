var mediaUploader,add_logo_file;function open_DP_AC_Tab(e,s){var t,a,n;for(a=document.getElementsByClassName("tabcontent"),t=0;t<a.length;t++)a[t].style.display="none";for(n=document.getElementsByClassName("tablinks"),t=0;t<n.length;t++)n[t].className=n[t].className.replace(" nav-tab-active","");document.getElementById(s).style.display="block",e.currentTarget.className+=" nav-tab-active"}jQuery(document).ready((function($){$(".refresh-topbar-frontend").click((function(e){e.preventDefault();var s=$(this).parents(".DP_AC_admin_header"),t=$(".refresh-topbar",s)[0];t.src=DP_AC_ajax.siteurl+"?DP_AC_refresh=yes",t.onload=function(){setTimeout((function(){t.src="about:blank",location.reload()}),1e3)}}));var e=wp.CodeMirror.fromTextArea(document.getElementById("DP_AC_custom_css"),{lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,mode:"text/css",matchBrackets:!0}),s=wp.CodeMirror.fromTextArea(document.getElementById("DP_AC_global_css"),{lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,mode:"text/css",matchBrackets:!0}),t=wp.CodeMirror.fromTextArea(document.getElementById("DP_AC_login_css"),{lineNumbers:!0,lineWrapping:!0,autoRefresh:!0,mode:"text/css",matchBrackets:!0});$(".admin_settings.notice, .user_roles.notice").append('<button type="button" class="dp--notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>'),$(document).on("click",".dp--notice-dismiss",(function(e){e.preventDefault(),e.stopPropagation(),$(this).parents(".notice").hide()})),$(".reorder-admin-menus").sortable({handle:".move",change:function(e,s){s.placeholder.css({visibility:"visible",border:"1px solid yellow"})},placeholder:"highlight",start:function(e,s){s.item.toggleClass("highlight")},stop:function(e,s){s.item.toggleClass("highlight")}}),$(".of-checkboxes.select-all").change((function(){var e=$(this).parents(".tabcontent");$(this).is(":checked")?$(".main-menu .main-menus",e).prop("checked",!0):$(".main-menu .main-menus",e).prop("checked",!1)})),$(".toggle-header").click((function(){$(this).next(".main-menus-box").slideToggle("100","swing"),$(this).find(".toggle-trigger").toggleClass("opened")})),$(".toggle-trigger").click((function(){if(!$(this).hasClass("section")){$(this).toggleClass("opened");var e=$(this).parents(".main-menu");$(e).find(".sub-menu").slideToggle("100","swing")}})),$("#rb_settings_role").change((function(){var e=$(this).val();""==e?$("#rb_settings_options").hide():$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_loadRoleMenuSettings",role_slug:e,verify_nonce:DP_AC_ajax.DP_AC_nonce},dataType:"json",success:function(e){var s;$("#rb_settings_options").show(),$("#rb_settings_options .of-checkboxes").prop("checked",!1),e.menus.length>0&&e.menus.forEach((function(e){$("#rb_settings_options input[value='"+e+"']").prop("checked",!0)})),e.top_bar.length>0&&e.top_bar.forEach((function(e){$("#rb_settings_options .topmain input[value='"+e+"']").prop("checked",!0)})),e.top_bar_frontend.length>0&&e.top_bar_frontend.forEach((function(e){$("#rb_settings_options .topfrontend-main input[value='"+e+"']").prop("checked",!0)})),$.each($.parseJSON(e.submenus),(function(e,t){$("#rb_settings_options input[data-parent='"+e+"']").each((function(){s=$(this),$.each(t,(function(e,t){$(s).val()==t&&$(s).prop("checked",!0)}))}))}))}})})),$("#mopr_settings_role").change((function(){var e=$(this).val();""==e?$("#mopr_settings_options").hide():$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_loadRoleMenuOrder",role_slug:e,verify_nonce:DP_AC_ajax.DP_AC_nonce},dataType:"json",success:function(e){if($("#mopr_settings_options").show(),Object.keys(e.order).length>0){var s=$("#mopr_settings_options #reorder-admin-menus"),t=s.children("li");t.sort((function(s,t){return e.order[$(s).find("input").val().trim()]-e.order[$(t).find("input").val().trim()]})),s.append(t),s.sortable()}}})})),$(".of-save").click((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this),t=$("#rb_settings_role").val(),a=$(s).data("tabid"),n=$("#"+a),i=[],o=[],c=[],r=[];$(".main-menus",n).each((function(){$(this).is(":checked")&&($(this).hasClass("top")?i.push($(this).val()):$(this).hasClass("topfrontend")?o.push($(this).val()):c.push($(this).val()))})).promise().done((function(){$(".sub-menus",n).each((function(){$(this).is(":checked")&&($(this).hasClass("top")?i.push($(this).val()):r.push({parent:$(this).data("parent"),current:$(this).val()}))})).promise().done((function(){$(s).find(".spinner").addClass("show"),$(s).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"save_admin_settings",tabid:a,role_slug:t,top_menus:i,top_menus_frontend:o,menus:c,sub_menus:r,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(s).find(".spinner").removeClass("show"),$(s).removeClass("disabled"),$(".success-message").show()):$(".error-message").show()}})}))}))})),$(".color-picker").wpColorPicker(),$(document).on("click",".script-file-upload",(function(e){e.preventDefault(),$(this);var s=$(this).parents(".file-upload");(add_script_file=wp.media.frames.file_frame=wp.media({title:"Choose Image",button:{text:"Choose Image"},multiple:!1})).on("open",(function(){var e=add_script_file.state().get("selection");ids=$(s).find(".script-file").val().split(","),ids.forEach((function(s){attachment=wp.media.attachment(s),attachment.fetch(),e.add(attachment?[attachment]:[])}))})),add_script_file.on("select",(function(){var e=add_script_file.state().get("selection").toJSON();$(s).find(".script-file").val(""),e.forEach((function(e){$(s).find(".script-file").val(e.url)}))})),add_script_file.open()})),$(".of-save-roles").click((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this),t=[];$("#user_roles .dp__switch input").each((function(){$(this).is(":checked")&&t.push($(this).val())})).promise().done((function(){$(s).find(".spinner").addClass("show"),$(s).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_roles",roles:t,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(s).find(".spinner").removeClass("show"),$(s).removeClass("disabled"),$(".success-message").show()):$(".error-message").show()}})}))})),$("#DP_AC_disable_wpac").change((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s="";s=$("#DP_AC_disable_wpac").is(":checked")?"yes":"no",setTimeout((()=>{$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_DP_AC_disable_wpac",DP_AC_disable_wpac:s,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?$(".success-message").show():$(".error-message").show()}})}),100)})),$("#DP_AC_reorder_force").change((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s="";s=$("#DP_AC_reorder_force").is(":checked")?"yes":"no",setTimeout((()=>{$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_DP_AC_reorder_force",DP_AC_reorder_force:s,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?$(".success-message").show():$(".error-message").show()}})}),100)})),$("#DP_AC_remove_data").change((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s="";s=$("#DP_AC_remove_data").is(":checked")?"yes":"no",setTimeout((()=>{$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_DP_AC_remove_data",DP_AC_remove_data:s,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?$(".success-message").show():$(".error-message").show()}})}),100)})),$("#DP_AC_super_admin").change((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this).val();setTimeout((()=>{$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_DP_AC_super_admin",DP_AC_super_admin:s,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?$(".success-message").show():$(".error-message").show()}})}),100)})),$(".DP_AC_topbar").change((function(e){$(this).is(":checked")?$(this).parents(".dp__switch").find(".DP_AC_topbar_input").val("yes"):$(this).parents(".dp__switch").find(".DP_AC_topbar_input").val("no")})),$("#panel-theme-tools input[name='DP_AC_inject_css']").change((function(){$(this).is(":checked")?$(".DP_AC-editor.DP_AC_custom_css").show():$(".DP_AC-editor.DP_AC_custom_css").hide()})),$("#panel-theme-tools input[name='DP_AC_inject_global']").change((function(){$(this).is(":checked")?$(".DP_AC-editor.DP_AC_global_css").show():$(".DP_AC-editor.DP_AC_global_css").hide()})),$(".of-save-theme").click((function(t){t.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var a=$(this),n=[];n.push({name:"DP_AC_custom_css",value:JSON.stringify(e.getValue("\n"))}),$("#DP_AC_global_css").length>0&&n.push({name:"DP_AC_global_css",value:JSON.stringify(s.getValue("\n"))}),$("#theme .dp__switch input").each((function(){$(this).is(":checked")?n.push({name:$(this).attr("name"),value:"yes"}):n.push({name:$(this).attr("name"),value:"no"})})).promise().done((function(){$(a).find(".spinner").addClass("show"),$(a).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_themes",themes:n,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(a).find(".spinner").removeClass("show"),$(a).removeClass("disabled"),$(".success-message").show(),location.reload()):$(".error-message").show()}})}))})),$("#DP_AC_layout").change((function(){"custom"==$(this).val()?$(".DP_AC-editor.DP_AC_login_css").show():$(".DP_AC-editor.DP_AC_login_css").hide()})),$(".of-save-adminlogin").click((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this),a=[];$("input[name='DP_AC_al_option']").is(":checked")?a.push({key:"DP_AC_al_option",value:"yes"}):a.push({key:"DP_AC_al_option",value:"no"}),a.push({key:"DP_AC_login_css",value:JSON.stringify(t.getValue("\n"))}),$("#adminLogin .adminlogin").each((function(){a.push({key:$(this).attr("id"),value:$(this).val()})})).promise().done((function(){$(s).find(".spinner").addClass("show"),$(s).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_adminLogin_options",adminlogin_options:a,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(s).find(".spinner").removeClass("show"),$(s).removeClass("disabled"),$(".success-message").show()):$(".error-message").show()}})}))})),$(".of-save-redirection").click((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this);let t={},a={};var n;$("#redirection .redirection").each((function(){n=$(this).attr("name"),t[n]=$(this).val()})).promise().done((function(){$("#redirection .DP_AC_topbar_input").each((function(){n=$(this).attr("name"),a[n]=$(this).val()})).promise().done((function(){$(s).find(".spinner").addClass("show"),$(s).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_redirection_options",redirection_options:t,topbar_options:a,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(s).find(".spinner").removeClass("show"),$(s).removeClass("disabled"),$(".success-message").show()):$(".error-message").show()}})}))}))})),$(".of-save-cus-dashboard").click((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this);let t={};var a,n="";n=$("#DP_AC_target_parent").is(":checked")?"yes":"no",$("#custom_dashboard .cus-dashboard").each((function(){a=$(this).attr("name"),t[a]=$(this).val()})).promise().done((function(){$(s).find(".spinner").addClass("show"),$(s).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_cus_dashboard",cus_dashboard_options:t,DP_AC_target_parent:n,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(s).find(".spinner").removeClass("show"),$(s).removeClass("disabled"),$(".success-message").show()):$(".error-message").show()}})}))})),$(".of-save-reorder").click((function(e){e.preventDefault(),$(".success-message").hide(),$(".error-message").hide();var s=$(this),t=$("#mopr_settings_role").val(),a=$(s).data("tabid"),n=$("#"+a),i=[];$("input[name='WPAC_menu_order[]']",n).each((function(){i.push($(this).val())})).promise().done((function(){$(s).find(".spinner").addClass("show"),$(s).addClass("disabled"),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_reorder",reorder:i,role_slug:t,tabid:a,verify_nonce:DP_AC_ajax.DP_AC_nonce},success:function(e){"success"==e.trim()?($(s).find(".spinner").removeClass("show"),$(s).removeClass("disabled"),$(".success-message").show(),"reorder_reset"==a&&location.reload()):$(".error-message").show()}})}))})),$(".custom-menu-item--save").click((function(e){e.preventDefault();var s=$(this),t=$(this).parents(".custom-menu-form"),a=$(s).data("type"),n=$(s).data("id"),i=!0;$(t).find(".not-empty").each((function(){""==$(this).val()?($(this).addClass("required"),i=!1):$(this).removeClass("required")})).promise().done((function(){if(i){$(".required-fields").hide(),$(s).prop("disabled",!0);let i={};var e;$(t).find("input[name='is_me_only']").is(":checked")?$(t).find("input[name='is_me_only']").val("1"):$(t).find("input[name='is_me_only']").val("0"),$(t).find("input[name='is_target_blank']").is(":checked")?$(t).find("input[name='is_target_blank']").val("1"):$(t).find("input[name='is_target_blank']").val("0"),setTimeout((()=>{$(t).find(".custom-menu-field").each((function(){e=$(this).attr("name"),i[e]=$(this).val()})).promise().done((function(){$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_custom_menus",custom_menus:i,form_type:a,id:n,verify_nonce:DP_AC_ajax.DP_AC_nonce},dataType:"json",success:function(e){$(s).prop("disabled",!1),"register"==a&&($(".register-new-custom-menu-item select[name='parent_id'], .register-new-custom-menu-item input[name='dashicon'], .register-new-custom-menu-item input[name='svg'], .register-new-custom-menu-item input[name='link'], .register-new-custom-menu-item input[name='name']").val(""),$(".register-new-custom-menu-item input[name='priority']").val("0"),$(".register-new-custom-menu-item select[name='capability']").val("read")),$(".saved-custom-menus").html(e.custom_menus),$(".register-new-custom-menu-item select[name='parent_id']").html(e.menu_parents)}})}))}),1e3)}else $(".required-fields").show()}))})),$(document).on("click",".custom-menu-item--edit, .custom-menu-item--cancel",(function(){var e=$(this).parents(".custom-menu-item");$(e).toggleClass("active")})),$(document).on("click",".custom-menu-item--delete",(function(){var e=$(this),s=$(this).parents(".custom-menu-item"),t=$(this).data("id");confirm('Are you sure you want to delete "'+$(s).find("input[name='name']").val()+'"?')&&($(e).prop("disabled",!0),$.ajax({url:DP_AC_ajax.ajaxurl,type:"post",data:{action:"DP_AC_save_custom_menus_delete",id:t,verify_nonce:DP_AC_ajax.DP_AC_nonce},dataType:"json",success:function(s){$(e).prop("disabled",!1),$(".saved-custom-menus").html(s.custom_menus)}}))})),$(document).on("click",".menuIconlist li",(function(){var e=$(this).parents(".input-wrap");const s=Array.from(this.classList).find((e=>e.startsWith("dashicons-")&&"dashicons"!==e));s&&$(e).find(".icon-preview-trigger").attr("class","icon-preview-trigger dashicons "+s)})),$(document).on("click",".icon-preview-trigger",(function(){var e=$(this).closest(".icon-picker-toggle").find(".menuIconlist"),s="block"===e.css("display");e.css("display",s?"none":"block")})),$(document).on("click",".menuIconlist li.dashicons",(function(){var e=$(this).attr("class").split(/\s+/).find((function(e){return e.startsWith("dashicons-")&&"dashicons"!==e}));e&&($(this).closest(".icon-picker-toggle").find(".custom-menu-field").val(e),$(this).closest(".menuIconlist").css("display","none"))})),$(document).on("change","select[name='parent_id']",(function(){var e=$(this).parents(".custom-menu-form");""!=$(this).val()?$(e).find(".icons").hide():$(e).find(".icons").show()}))}));